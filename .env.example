# ============================================
# MTÜ Kaiu Kodukant - Environment Configuration
# ============================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control!

# ============================================
# DOMAIN CONFIGURATION
# ============================================

# Your domain name (without https:// or www.)
# For local testing, use: localhost
# For staging, use: test.kaiukodukant.ee
# For production, use: kaiukodukant.ee
DOMAIN_NAME=localhost

# ============================================
# GOOGLE API CONFIGURATION (Replaces Apps Script)
# ============================================
# Get API key from: https://console.cloud.google.com/
# Required APIs: Google Calendar API + Google Drive API
# Instructions: planning/google-plan/HOW-TO-CREATE-API-KEY.md

# Google API Key (eliminates weekly reauthorization)
GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY_HERE

# Calendar ID (your public calendar)
GOOGLE_CALENDAR_ID=YOUR_CALENDAR_ID_HERE

# Drive Folder ID (your gallery folder)
GOOGLE_DRIVE_FOLDER_ID=YOUR_DRIVE_FOLDER_ID_HERE

# Calendar sync settings
CALENDAR_MONTHS_BACK=1
CALENDAR_MONTHS_FORWARD=6

# Gallery sync settings
GALLERY_BATCH_SIZE=10
GALLERY_MAX_RUNTIME=300

# ============================================
# GOOGLE APPS SCRIPT (DEPRECATED - Being Phased Out)
# ============================================
# ⚠️ This is being replaced by GOOGLE_API_KEY above
# Apps Script requires weekly reauthorization
# Keep for backward compatibility during migration
GOOGLE_APPS_SCRIPT_URL=YOUR_DEPLOYED_APPS_SCRIPT_URL_HERE

# ============================================
# RECAPTCHA CONFIGURATION
# ============================================
# Get these from: https://www.google.com/recaptcha/admin
# Choose reCAPTCHA v3 when creating

# Site key (used in frontend)
RECAPTCHA_SITE_KEY=YOUR_RECAPTCHA_SITE_KEY_HERE

# Secret key (used in backend for validation)
RECAPTCHA_SECRET_KEY=YOUR_RECAPTCHA_SECRET_KEY_HERE

# ============================================
# EMAIL CONFIGURATION (RESEND)
# ============================================
# Sign up at: https://resend.com
# Free tier: 100 emails/day, 3,000 emails/month
# Verify your domain in Resend dashboard before sending

# Resend API Key (get from: https://resend.com/api-keys)
RESEND_API_KEY=re_YOUR_API_KEY_HERE

# Sender email address (must be verified domain in Resend)
RESEND_FROM_EMAIL=noreply@kaiukodukant.ee

# Recipient email for form notifications
INFO_EMAIL=info@kaiukodukant.ee

# ============================================
# ADMIN DASHBOARD AUTHENTICATION
# ============================================

# Admin password hash (bcrypt hashed)
# Generate with: node -e "console.log(require('bcrypt').hashSync('your-password-here', 10))"
ADMIN_PASSWORD_HASH=$2b$10$REPLACE_WITH_YOUR_GENERATED_HASH

# JWT Secret for session tokens
# Generate with: openssl rand -base64 32
JWT_SECRET=REPLACE_WITH_YOUR_GENERATED_SECRET_32_CHARS_MIN

# ============================================
# S3 CONFIGURATION (Pilvio)
# ============================================
# Used for monitoring calendar/gallery sync status

S3_ENDPOINT=https://s3.pilw.io
S3_BUCKET=your-bucket-name
S3_REGION=eu-west-1
S3_ACCESS_KEY_ID=YOUR_S3_ACCESS_KEY_ID_HERE
S3_SECRET_ACCESS_KEY=YOUR_S3_SECRET_ACCESS_KEY_HERE

# ============================================
# WEATHER & AI CONFIGURATION
# ============================================

# OpenAI Configuration for Weather Blurbs
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-YOUR_OPENAI_API_KEY_HERE
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=200

# Weather Configuration
WEATHER_UPDATE_INTERVAL=14400  # 4 hours in seconds
WEATHER_LOCATION_COORDS=59.0106;25.0597  # Kaiu, Raplamaa
WEATHER_LOCATION_NAME=Kaiu, Raplamaa

# ============================================
# OPTIONAL: GOOGLE SHEETS INTEGRATION
# ============================================
# Enable if you want to sync form submissions to Google Sheets

# Enable/disable Google Sheets sync
GOOGLE_SHEETS_ENABLED=false

# Spreadsheet IDs (only needed if GOOGLE_SHEETS_ENABLED=true)
# MEMBERSHIP_SPREADSHEET_ID=YOUR_SPREADSHEET_ID_HERE
# CONTACT_SPREADSHEET_ID=YOUR_SPREADSHEET_ID_HERE

# Google Service Account credentials (JSON string)
# GOOGLE_SERVICE_ACCOUNT={"type":"service_account","project_id":"..."}

# ============================================
# DATA RETENTION & MAINTENANCE
# ============================================

# Number of days to keep form submissions
# 0 = keep forever (default)
DATA_RETENTION_DAYS=0

# ============================================
# OPTIONAL: DOCKER & DEVELOPMENT SETTINGS
# ============================================

# Node environment
# NODE_ENV=development

# Optional: Docker Configuration
# COMPOSE_PROJECT_NAME=kaiumtu
# RESTART_POLICY=unless-stopped

# Optional: Caddy Configuration
# CADDY_LOG_LEVEL=INFO
# CADDY_ADMIN_DISABLED=true

# Optional: Email notifications
# NOTIFICATION_EMAIL=info@kaiukodukant.ee

# ============================================
# QUICK SETUP CHECKLIST
# ============================================
# 1. [ ] Set DOMAIN_NAME
# 2. [ ] Add GOOGLE_API_KEY for calendar/gallery sync (see planning/google-plan/)
# 3. [ ] Configure GOOGLE_CALENDAR_ID and GOOGLE_DRIVE_FOLDER_ID
# 4. [ ] Configure reCAPTCHA keys (site key + secret key)
# 5. [ ] Set up Resend account and add RESEND_API_KEY
# 6. [ ] Verify domain in Resend dashboard
# 7. [ ] Set INFO_EMAIL for receiving form notifications
# 8. [ ] Generate and set ADMIN_PASSWORD_HASH
# 9. [ ] Generate and set JWT_SECRET
# 10. [ ] Verify S3 credentials
# 11. [ ] Configure OpenAI API key for weather blurbs
# 12. [ ] Save as .env (not .env.example)
# 13. [ ] Test: node test-drive-api-key.js (verify Google API access)
